@{
    ViewData["Title"] = "Upload Game";
}

@section styles {
    <!-- Additional CSS for this view -->
    <link href="~/css/UploadGameStyle.css" rel="stylesheet" />
}

@model VAII.Models.DTO.GameViewModel

<div class="row">
    <div class="col-2 d-none d-lg-block secondaryBackground"></div>

    <div class="col-12 col-lg-8 primaryBackground">
        <form asp-action="UploadGame" method="post" enctype="multipart/form-data">
            <div class="row p-3 gx-3 gy-5">

                <div class="col-md-6 col-12">
                    <div class="col">
                        <label for="titleInput" class="">Title</label>
                        <input id="titleInput" class="form-control customForm" type="text" placeholder="Title" asp-for="Title">
                    </div>
                    <div class="col">
                        Upload Image
                        <div class="formImage">
                            <label for="imageInput" class="w-100">
                                <i class="bi-arrow-up-circle-fill"></i>
                            </label>
                        </div>
                        <input class="hide" type="file" id="imageInput" accept="image/*" asp-for="ImagePath">
                    </div>
                </div>

                <div class="col-md-6 col-12 align-content-end">
                    <img id="imagePreview" class="size ratio img-thumbnail" src="" alt="">
                </div>

                <div class="col-12">
                    <label for="description" class="">Description</label>
                    <textarea class="form-control customForm" placeholder="Description" id="description" rows="10" asp-for="Description"></textarea>
                </div>

                <div class="col-12 uploadTags">
                    <label for="tagsInput">Tags</label>

                    <!-- Search and add new tag -->
                    <input type="text" id="searchTag" class="form-control" placeholder="Search or add new tag" />
                    <button type="button" id="addTag" class="formImage">Add Tag</button>

                    <!-- List of tags (existing and selected) -->
                    <div class="row d-flex gap-3" id="selectedTags">
                        @foreach (var tag in Model.AvailableTags)
                        {
                            <div class="col-auto">
                                <button type="button" class="tag btn btn-light" data-tag-id="@tag.TagID">
                                    @tag.TagName
                                </button>
                            </div>
                        }
                    </div>

                    <div class="form-group">
                        <select name="SelectedTagIds" id="selectedTagIds" class="form-control" multiple>
                            @foreach (var tag in Model.AvailableTags)
                            {
                                <option value="@tag.TagID">@tag.TagName</option>
                            }
                        </select>
                    </div>
                </div>                

                <div class="col-12">
                    <label for="fileInput" class="col-12" >UploadGame</label>
                </div>

                <div class="row p-2 gap-3 gx-1">
                    <div class="col-auto">
                        <input class="gameUpload input-group" type="file" id="fileInput" >
                    </div>

                    <div class="col-auto align-content-end ms-auto">
                        <button type="submit" class="formImage d-flex align-self-center ms-auto">
                            Confirm
                            <i class="bi-check-circle-fill"></i>
                        </button>
                    </div>

                </div>

            </div>
        </form>
    </div>

    <div class="col-2 d-none d-lg-block secondaryBackground"></div>
</div>

@section Scripts {
    <script src="~/js/showImage.js"></script>
    <script src="~/js/addTag.js"></script>
}